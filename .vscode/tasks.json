{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "mass erase",
            "detail": "performs a mass erase, also unlocks new MCU with pre-flashed bootloader",
            "group": "build",
            "type": "shell",  
            "windows":{
                "command": "openocd.exe",
            },
            "linux":{
                "command": "openocd",
            },
            "args":[ 
                "-d2", 
                "-f", 
                "openocd.cfg",
                "-c",
                "'init; reset; init; halt; nrf51 mass_erase; exit'"
            ],
            "problemMatcher": [],
        },  
        {
            "label": "flash",
            "group": "build",
            "type": "shell",     
            "windows":{
                "command": "openocd.exe",
                "args":[
                    "-d2", 
                    "-f", 
                    "openocd.cfg",
                    "-c", 
                    "'init_reset halt; program \"C:/git/nrf_blinky_stlink/blinky/build/zephyr/zephyr.hex\" verify; reset; exit'",
                    // "'init_reset halt; program \"${workspaceFolder}/blinky/build/zephyr/zephyr.hex\" verify; reset; exit'", // doesn't work
                ],
            },
            "linux":{
                "command": "openocd",
                "args":[
                    "-d2", 
                    "-f", 
                    "openocd.cfg",
                    "-c", 
                    "'init_reset halt; program \"${workspaceFolder}/blinky/build/zephyr/zephyr.hex\" verify; reset; exit'",
                ],
            },
            "problemMatcher": [],
        },  
        {
            "label" : "build",
            "type": "nrf-connect-build",
        },
        {
            "label": "build + flash",
            "type": "shell",
            "dependsOrder": "sequence",
            "dependsOn": ["build", "flash"],
            "problemMatcher": [],
        }, 
            
    ]   
}